# ~/.config/hypr/hyprland.conf

# #######################################################################################
# Selandia_Nyx 自用的配置文件
# 按照官方 Wiki 指南修改
# #######################################################################################

# autogenerated = 1 # 删除或注释该行以去掉“自动生成”的提示

# 这是 Selandia_Nyx 自用的 Hyprland 配置文件
# 详细配置请参考官方 Wiki：https://wiki.hypr.land/Configuring/

# 不是所有配置项都包含在这里，更多参数请查阅 Wiki

# 可以将配置拆分到多个文件，例如：
# source = ~/.config/hypr/myColors.conf   # 引入外部配置


################
### MONITORS ###
################

# 显示器配置：格式 monitor=名称,分辨率@刷新率,位置,缩放
monitor=DP-3,2560x1440@180,0x0,1  # 主显示器 DP-3，分辨率 2560x1440，刷新率 180Hz，坐标 0x0，缩放 1


###################
### MY PROGRAMS ###
###################

# 定义常用程序的快捷变量
$terminal = kitty        # 终端
$fileManager = thunar    # 文件管理器
$browser = firefox       # 浏览器


#################
### AUTOSTART ###
#################

# 自动启动程序
exec-once = nm-applet &                    # 网络管理托盘
exec-once = blueman-applet                 # 蓝牙管理托盘
exec-once = fcitx5 -d                      # 输入法守护进程
exec-once = waybar                         # 状态栏，配置文件位于 ~/.config/waybar/config
exec-once = hyprpaper                      # 壁纸管理，配置文件 ~/.config/hypr/hyprpaper.conf
exec-once = hypridle                       # 空闲/锁屏管理，配置文件 ~/.config/hypr/hypridle.conf
exec-once = hyprsunset                     # 护眼色温工具，配置文件 ~/.config/hypr/hyprsunset.conf
exec-once = systemctl --user start hyprpolkitagent  # 启动 polkit 认证代理
exec-once = wl-paste --type text --watch cliphist store  # 剪贴板监听（文本）
exec-once = wl-paste --type image --watch cliphist store # 剪贴板监听（图片）
exec-once = sleep 5 && clash-verge          # 延时 5 秒启动 clash-verge 代理软件


#############################
### ENVIRONMENT VARIABLES ###
#############################

# 设置环境变量
env = XCURSOR_SIZE,24        # 鼠标指针大小
env = HYPRCURSOR_SIZE,24     # Hyprcursor 光标大小
env = ELECTRON_OZONE_PLATFORM_HINT,auto  # Electron 自动检测 Wayland/X11 平台


###################
### PERMISSIONS ###
###################

# 权限配置（部分操作需要显式允许）
# 修改后需要重启 Hyprland 才生效

# ecosystem {
#   enforce_permissions = 1   # 强制执行权限
# }

# permission = /usr/(bin|local/bin)/grim, screencopy, allow
# permission = /usr/(lib|libexec|lib64)/xdg-desktop-portal-hyprland, screencopy, allow
# permission = /usr/(bin|local/bin)/hyprpm, plugin, allow


#####################
### LOOK AND FEEL ###
#####################

general {
    gaps_in = 5                 # 窗口间内间距
    gaps_out = 20               # 窗口与屏幕边缘外间距
    border_size = 2             # 窗口边框宽度

    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg  # 活动窗口边框渐变色
    col.inactive_border = rgba(595959aa)                     # 非活动窗口边框颜色

    resize_on_border = false     # 是否允许拖动边框调整大小
    allow_tearing = false        # 是否允许画面撕裂
    layout = dwindle             # 默认布局：dwindle（平铺）
}

decoration {
    rounding = 10              # 窗口圆角半径
    rounding_power = 2         # 圆角强度
    active_opacity = 1.0       # 活动窗口透明度
    inactive_opacity = 1.0     # 非活动窗口透明度

    shadow {
        enabled = true         # 启用阴影
        range = 4              # 阴影范围
        render_power = 3       # 阴影渲染强度
        color = rgba(1a1a1aee) # 阴影颜色
    }

    blur {
        enabled = true         # 启用模糊
        size = 3               # 模糊大小
        passes = 1             # 模糊次数
        vibrancy = 0.1696      # 模糊鲜艳度
    }
}

animations {
    enabled = yes, please :)   # 启用动画

    # 定义插值函数
    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = easeInOutCubic,0.65,0.05,0.36,1
    bezier = linear,0,0,1,1
    bezier = almostLinear,0.5,0.5,0.75,1.0
    bezier = quick,0.15,0,0.1,1

    # 动画类型配置（参数依次为：类别，持续时间，速率，曲线，附加效果）
    animation = global, 1, 10, default
    animation = border, 1, 5.39, easeOutQuint
    animation = windows, 1, 4.79, easeOutQuint
    animation = windowsIn, 1, 4.1, easeOutQuint, popin 87%
    animation = windowsOut, 1, 1.49, linear, popin 87%
    animation = fadeIn, 1, 1.73, almostLinear
    animation = fadeOut, 1, 1.46, almostLinear
    animation = fade, 1, 3.03, quick
    animation = layers, 1, 3.81, easeOutQuint
    animation = layersIn, 1, 4, easeOutQuint, fade
    animation = layersOut, 1, 1.5, linear, fade
    animation = fadeLayersIn, 1, 1.79, almostLinear
    animation = fadeLayersOut, 1, 1.39, almostLinear
    animation = workspaces, 1, 1.94, almostLinear, fade
    animation = workspacesIn, 1, 1.21, almostLinear, fade
    animation = workspacesOut, 1, 1.94, almostLinear, fade
}

dwindle {
    pseudotile = true           # 伪平铺（主窗口保持大小，其他平铺）
    preserve_split = true       # 保持分割方向
}

master {
    new_status = master         # 新建窗口在 master 区域
}

misc {
    force_default_wallpaper = -1   # 禁用默认壁纸（-1 = 使用自定义）
    disable_hyprland_logo = false # 是否禁用随机 logo / 动漫图
}


#############
### INPUT ###
#############

input {
    kb_layout = us              # 键盘布局
    kb_variant =                # 键盘变体
    kb_model =                  # 键盘型号
    kb_options =                # 键盘选项
    kb_rules =                  # XKB 规则

    follow_mouse = 1            # 鼠标焦点跟随
    sensitivity = 0             # 鼠标灵敏度（-1.0 ~ 1.0）

    touchpad {
        natural_scroll = false  # 触摸板自然滚动（false=传统）
    }
}

gestures {
    workspace_swipe = false     # 是否启用触控板工作区滑动
}

device {
    name = epic-mouse-v1        # 针对特定设备配置
    sensitivity = -0.5          # 鼠标灵敏度 -0.5
}


###################
### KEYBINDINGS ###
###################

$mainMod = SUPER   # 定义主修饰键（Windows 键）

# 常用快捷键
bind = $mainMod, Q, exec, $terminal              # 打开终端
bind = $mainMod, C, killactive,                  # 关闭当前窗口
bind = $mainMod, M, exit,                        # 退出 Hyprland
bind = $mainMod, E, exec, $fileManager           # 打开文件管理器
bind = $mainMod, G, togglefloating,              # 切换浮动模式
bind = $mainMod, R, exec, ~/.config/wofi/launchermenu.sh # 应用启动器
bind = $mainMod, P, pseudo,                      # 切换伪平铺（dwindle）
bind = $mainMod, J, togglesplit,                 # 切换分割方向（dwindle）
bind = $mainMod, L, exec, hyprlock               # 锁屏
bind = $mainMod, V, exec, cliphist list | wofi --dmenu | cliphist decode | wl-copy # 剪贴板管理
bind = $mainMod, B, exec, $browser               # 打开浏览器

# 焦点移动
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# 工作区切换
bind = $mainMod, 1, workspace, 1
...
bind = $mainMod, 0, workspace, 10

# 移动窗口到指定工作区
bind = $mainMod SHIFT, 1, movetoworkspace, 1
...
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# 特殊工作区（scratchpad）
bind = $mainMod, S, togglespecialworkspace, magic
bind = $mainMod SHIFT, S, movetoworkspace, special:magic

# 滚轮切换工作区
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# 电源菜单
bind = $mainMod, Escape, exec, ~/.config/wofi/powermenu.sh

# 鼠标操作
bindm = $mainMod, mouse:272, movewindow   # 拖动窗口
bindm = $mainMod, mouse:273, resizewindow # 调整窗口大小

# 音量与亮度
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+ # 音量+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-     # 音量-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle           # 静音
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle      # 麦克风静音
bindel = ,XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+ || hyprctl hyprsunset gamma +10  # 亮度+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%- || hyprctl hyprsunset gamma -10 # 亮度-

# 媒体键（需 playerctl）
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous


##############################
### WINDOWS AND WORKSPACES ###
##############################

# 窗口规则
windowrule = suppressevent maximize, class:.*   # 忽略应用请求最大化
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0 # 修复 XWayland 拖拽问题
